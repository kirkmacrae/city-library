<h1>Book Listing</h1>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Author</th>
      <th>Genre</th>
      <th>Subgenre</th>
      <th>Pages</th>
      <th>Publisher</th>
      <th>TotalCopies</th>
      <th>Available</th>      
      <th colspan="2"></th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= book[0] %></td>
        <td><%= book[1] %></td>
        <td><%= book[2] %></td>
        <td><%= book[3] %></td>
        <td><%= book[4] %></td>
        <td><%= book[5] %></td>
        <td><%= book[7] %></td>
        <td><%= book[7] - (book[8]? book[8] : 0) %></td>
        <% if current_user.try(:admin?) %>
        <td><%= link_to 'Details',  book_listing_details_path(:book_number => book[6]) %></td>
        <% end %>
        <% if current_user && book[7] - (book[8]? book[8] : 0) > 0 %>           
        <td><%= link_to 'Borrow',  books_borrow_path(:book_number => book[6]) %></td>
        <% end %>        
        
      </tr>
    <% end %>
  </tbody>
</table>

<br>
